<%- include("partials/header"); -%>

<body>
  <div class="container">
<% if (err) { %>
  <div class="alert alert-warning alert-dismissible" role="alert">
    <button class="close" data-dismiss="alert" aria-label="Close" type="button"><span aria-hidden="true">&times;</span></button>
    <strong>Warning!</strong> <%= err %>
  </div>
<% } %>

<h1>Assign Carrier and Freight</h1>
<p>Please enter carrier and freight information below and submit</p>
<br />
<form class="" action="/assign-carrier-and-freight/<%= selectedRequest._id %>" method="post">

  <div class="row">
    <div class="form-group col-md-5">
      <label for="selectShipFrom">Ship From</label>
      <select id="selectShipFrom" class="form-control" name="shipFrom" required readonly>
        <% customers.forEach(function(customer) { %>
          <% if (customer.customer === selectedRequest.shipFrom) { %>
            <option value="<%= customer._id %>" selected><%= customer.customer %></option>
          <% } %>
        <% }) %>
      </select>
    </div>
    <div class="form-group col-md-7">
      <label for="selectShipFromAddress">Ship From Address</label>
      <select id="selectShipFromAddress" class="form-control" name="shipFromAddress" required readonly>
        <% destinations.forEach(function(destination) { %>
          <% if (destination.destination === selectedRequest.shipFromDestination) { %>
            <option value="<%= destination._id %>" customer_id="<%= destination.customer_id %>" selected><%= destination.destination %>: <%= destination.streetAddress %>, <%=destination.city %> <%= destination.state %>, <%= destination.zipcode %>, <%= destination.country %></option>
          <% } %>
        <% }) %>
      </select>
    </div>
  </div>

  <div class="row">
    <div class="form-group col-md-5">
      <label for="selectShipTo">Ship To</label>
      <select id="selectShipTo" class="form-control" name="shipTo" required readonly>
        <% customers.forEach(function(customer) { %>
          <% if (customer.customer === selectedRequest.shipTo) { %>
            <option value="<%= customer._id %>" selected><%= customer.customer %></option>
          <% } %>
        <% }) %>
      </select>
    </div>
    <div class="form-group col-md-7">
      <label for="selectShipToAddress">Ship To Address</label>
      <select id="selectShipToAddress" class="form-control" name="shipToAddress" required readonly>
        <% destinations.forEach(function(destination) { %>
          <% if (destination.destination === selectedRequest.shipToDestination) { %>
            <option value="<%= destination._id %>" customer_id="<%= destination.customer_id %>" selected><%= destination.destination %>: <%= destination.streetAddress %>, <%=destination.city %> <%= destination.state %>, <%= destination.zipcode %>, <%= destination.country %></option>
          <% } %>
        <% }) %>
      </select>
    </div>
  </div>

  <div class="row">
    <div class="form-group col-md-4">
      <label for="inputKg">Weight(kg)</label>
      <input class="form-control" id="inputKg" type="text" name="weightKg" pattern="[0-9]{1,5}" value="<%= selectedRequest.weightKg %>" required readonly>
    </div>

    <div class="form-group col-md-4">
      <label for="inputBolNo">BOL No</label>
      <input class="form-control" id="inputBolNo" type="text" name="bolNo" value="<%= selectedRequest.bolNo %>" pattern="[A-Z]{1}[0-9]{11}" placeholder="Arrangement #" required readonly>
    </div>

    <div class="form-group col-md-4">
      <label for="inputTruck">Truck Type</label>
      <% if (selectedRequest.truckType === "Flatbed") { %>
      <div class="form-group">
        <div class="form-check radio-inline">
          <input class="form-check-input truck-type" id="inputTruck" type="radio" name="truckOptions" id="flatbed" value="Flatbed" checked required readonly>
          <label class="form-check-label" for="inputTruck">Flatbed</label>
        </div>
        <div class="form-check radio-inline">
          <input class="form-check-input truck-type" id="inputTruck" type="radio" name="truckOptions" id="van" value="Van" required readonly>
          <label class="form-check-label" for="inputTruck">Van</label>
        </div>
      </div>
      <% } else if (selectedRequest.truckType === "Van") { %>
      <div class="form-group">
        <div class="form-check radio-inline">
          <input class="form-check-input truck-type" id="inputTruck" type="radio" name="truckOptions" id="flatbed" value="Flatbed" required readonly>
          <label class="form-check-label" for="inputTruck">Flatbed</label>
        </div>
        <div class="form-check radio-inline">
          <input class="form-check-input truck-type" id="inputTruck" type="radio" name="truckOptions" id="van" value="Van" checked required readonly>
          <label class="form-check-label" for="inputTruck">Van</label>
        </div>
      </div>
      <% } else { %>
        <div class="form-group">
          <div class="form-check radio-inline">
            <input class="form-check-input truck-type" id="inputTruck" type="radio" name="truckOptions" id="flatbed" value="Flatbed" required readonly>
            <label class="form-check-label" for="inputTruck">Flatbed</label>
          </div>
          <div class="form-check radio-inline">
            <input class="form-check-input truck-type" id="inputTruck" type="radio" name="truckOptions" id="van" value="Van" required readonly>
            <label class="form-check-label" for="inputTruck">Van</label>
          </div>
        </div>
      <% } %>
    </div>
  </div>

  <div class="row">
    <div class="form-group col-md-6">
      <label for="inputShippingDate">Shipping Date</label>
      <input class="form-control" id="inputShippingDate datepicker" type="date" name="shippingDate" value="<%= selectedRequest.shippingDate %>" placeholder="YYYY-MM-DD" title="YYYY-MM-DD" pattern="[1-2]{1}[0-9]{3}-[0-9]{2}-[0-9]{2}" min="1990-01-01" max="2999-12-31" required readonly>
    </div>

    <div class="form-group col-md-6">
      <label for="inputDeliveryDate">Delivery Date</label>
      <input class="form-control" id="inputDeliveryDate" type="date" name="deliveryDate" value="<%= selectedRequest.deliveryDate %>" placeholder="YYYY-MM-DD" title="YYYY-MM-DD" pattern="[1-2]{1}[0-9]{3}-[0-9]{2}-[0-9]{2}" min="1990-01-01" max="2999-12-31" required readonly>
    </div>
  </div>

  

  <div class="row">
    <div class="form-group col-md-12">
      <label for="inputSpecialNote">Special Note</label>
      <input class="form-control" id="inputSpecialNote" type="text" name="specialNote" value="<%= selectedRequest.specialNote %>" readonly>
    </div>
  </div>

  <div class="row">
    <div class="form-group col-md-6">
      <label for="inputCarrier">Carrier</label>
      <input class="form-control" id="inputCarrier" type="text" name="carrier" value="<%= carrier %>" required>
    </div>

    <div class="form-group col-md-6">
      <label for="inputFreight">Freight ($/Truck)</label>
      <input class="form-control" id="inputFreight" type="text" name="freight" value="<%= freight %>" pattern="[0-9]{0,9}.[0-9]{0,2}" title="Please enter up to 2 decimal places: $123 or $123.45" required>
    </div>
  </div>

  <div class="row">
    <div class="form-group col-md-12">
      <button class="btn btn-lg btn-primary btn-block" type="submit" name="button" value="submit">Submit</button>
    </div>
  </div>

  

</form>
</div>

<%- include("partials/footer"); -%>
<%- include("partials/scripts"); -%>
<script src="/javascript/populate_dynamic_options_for_ship_from.js"></script>
<script src="/javascript/populate_dynamic_options_for_ship_to.js"></script>

</body>

</html>



